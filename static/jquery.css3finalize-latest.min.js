/**
 * @author Han Lin Yap < http://zencodez.net/ >
 * @copyright 2010 zencodez.net
 * @license http://creativecommons.org/licenses/by-sa/3.0/
 * @package Css3-Finalize
 * @version 1.15 - 2010-12-01
 * @website https://github.com/codler/jQuery-Css3-Finalize
 *
 * == Description == 
 * Some css3 attributes needs to have a prefix in front 
 * in order to work in different browser. The plugin takes 
 * care of that so you only need to write without the prefix.
 *
 * == Example Usage ==
 * // This will look for all style-tags and parse them.
 * $.cssFinalize('style');
 */
(function(a){a.cssFinalize=function(g,d){var b=false;if(!d){d={}}if(a.browser.webkit||a.browser.safari){b="webkit"}else{if(a.browser.mozilla){b="moz"}else{if(a.browser.msie){if(parseInt(a.browser.version.substr(0,1))<=7&&!d.shim){return true}b="ms"}else{if(a.browser.opera){b="o"}}}}function i(r){return function(s){return r}}var q={animation:["webkit"],"animation-delay":["webkit"],"animation-direction":["webkit"],"animation-duration":["webkit"],"animation-iteration-count":["webkit"],"animation-name":["webkit"],"animation-timing-function":["webkit"],"backface-visibility":["webkit"],"background-clip":["webkit","khtml"],"background-origin":["webkit","khtml"],"background-size":["moz","webkit","khtml"],"border-image":["moz","webkit"],"border-top-image":["moz","webkit"],"border-right-image":["moz","webkit"],"border-bottom-image":["moz","webkit"],"border-left-image":["moz","webkit"],"border-corner-image":["moz","webkit"],"border-top-left-image":["moz","webkit"],"border-top-right-image":["moz","webkit"],"border-bottom-left-image":["moz","webkit"],"border-bottom-right-image":["moz","webkit"],"border-radius":["moz"],"border-top-left-radius":[i("-moz-border-radius-topleft")],"border-top-right-radius":[i("-moz-border-radius-topright")],"border-bottom-right-radius":[i("-moz-border-radius-bottomright")],"border-bottom-left-radius":[i("-moz-border-radius-bottomleft")],"box-align":["moz","webkit"],"box-direction":["moz","webkit"],"box-flex":["moz","webkit"],"box-flex-group":["moz","webkit"],"box-lines":["moz","webkit"],"box-ordinal-group":["moz","webkit"],"box-orient":["moz","webkit"],"box-pack":["moz","webkit"],"box-shadow":["moz","webkit"],"box-sizing":["moz","webkit"],"column-count":["moz","webkit"],"column-gap":["moz","webkit"],"column-rule":["moz","webkit"],"column-rule-color":["moz","webkit"],"column-rule-style":["moz","webkit"],"column-rule-width":["moz","webkit"],"column-width":["moz","webkit"],columns:["webkit"],marquee:["webkit"],"marquee-direction":["webkit"],"marquee-speed":["webkit"],"marquee-style":["webkit"],perspective:["webkit"],"perspective-origin":["webkit"],"tab-size":["moz","o"],"text-overflow":["o"],"text-size-adjust":["webkit","ms"],transform:["moz","webkit","o","ms"],"transform-origin":["moz","webkit","o","ms"],"transform-style":["webkit"],transition:["moz","webkit","o"],"transition-delay":["moz","webkit","o"],"transition-duration":["moz","webkit","o"],"transition-property":["moz","webkit","o"],"transition-timing-function":["moz","webkit","o"],"user-modify":["moz","webkit","khtml"],"user-select":["moz","webkit","khtml"]};function j(r){var s="";a.each(r,function(t,u){s+=u.selector+"{";if(a.isArray(u.attributes)){s+=j(u.attributes)}else{a.each(u.attributes,function(w,v){s+=w+":"+v+";"})}s+="}"});return s}function n(t){var s=t.split(/(:[^;]*;?)/);s.pop();var r={};a.map(s,function(v,u){if(u%2==1){r[a.trim(s[u-1])]=a.trim(v.substr(1).replace(";",""))}});return r}function p(z){var u=z.split(/({[^{}]*})/);if(u[u.length-1].indexOf("}")==-1){u.pop()}var v=[];var r=false;var A;var x=0;var y;var w=0;while(w<u.length){if(w%2==0){var s=a.trim(u[w]);if(r){if(s.indexOf("}")!=-1){s=s.substr(1);u[w]=s;y=u.splice(x,w-x);y.shift();y.unshift(A[1]);v[v.length-1].attributes=p(y.join(""));r=false;w=x;continue}}else{if(s.indexOf("{")!=-1){A=s.split("{");s=a.trim(A[0]);r=true;x=w}if(s!=""){v.push({selector:s})}}}else{if(!r){v[v.length-1].attributes=n(u[w].substr(1,u[w].length-2))}}w++}return v}function f(r){r=r.replace(/\/\*((?:[^\*]|\*[^\/])*)\*\//g,"");r=r.replace(/\n/g,"");r=r.replace(/\r/g,"");r=r.replace(/\@import[^;]*;/g,"");return r}function m(r){if(a.isArray(r)){return{}}var s={};a.each(r,function(v,u){var t=l(v);if(t){s[t]=u}var w=k(v,u);if(w){s[v]=w}});return s}function l(r){if(r in q){for(prefix in q[r]){if(a.isFunction(q[r][prefix])){return q[r][prefix](r)}else{if(b==q[r][prefix]||!b){return"-"+q[r][prefix]+"-"+r}}}}return false}function k(s,r){if(b=="moz"){if(r.indexOf("calc")==0){return"-moz-"+r}if(parseInt(a.browser.version.substr(0,1))<4){if(s=="background-clip"||s=="background-origin"){if(r=="padding-box"){return"padding"}else{if(r=="border-box"){return"border"}else{if(r=="content-box"){return"content"}}}}}}if(d.shim){if(b=="ms"){if(parseInt(a.browser.version.substr(0,1))<=7){if(s.toUpperCase()=="DISPLAY"&&r=="inline-block"){return"inline"}}}}return false}function h(r){if(b=="moz"){r=r.replace("::selection","::-moz-selection")}else{if(b=="webkit"){r=r.replace("@keyframes","@-webkit-keyframes")}}return r}function c(s,t){t=f(t);if(a.trim(t)==""){return}var u=p(t);var r=[];a.each(u,function(v,x){if(x.attributes){var w=m(x.attributes);if(!a.isEmptyObject(w)){r.push({selector:h(x.selector),attributes:w})}else{if(h(x.selector)!=x.selector){r.push({selector:h(x.selector),attributes:x.attributes})}}}});s.addClass("css-finalize-read");if(r.length>0){e(s,r)}}if(!(g instanceof jQuery)){g=a(g)}g.each(function(r,s){var u=a(this);if(u.hasClass("css-finalize-read")||u.hasClass("css-finalized")){return true}if(this.tagName=="LINK"&&u.attr("rel")=="stylesheet"){try{a("<div />").load(this.href,function(v){c(u,v)})}catch(t){}}else{c(u,u.html())}});function e(r,s){r.after('<style class="css-finalized">'+j(s)+"</style>")}if(a.cssHooks){for(property in q){if((newProperty=l(property))!==false){o(property,newProperty)}}}function o(s,r){a.cssHooks[a.camelCase(s)]={get:function(v,u,t){return v.style[a.camelCase(r)]},set:function(t,u){t.style[a.camelCase(r)]=u}}}};a(function(){if(window.cssFinalize!==false){a.cssFinalize("style, link")}})})(jQuery);var cbSplit;if(!cbSplit){cbSplit=function(i,f,e){if(Object.prototype.toString.call(f)!=="[object RegExp]"){return cbSplit._nativeSplit.call(i,f,e)}var c=[],a=0,d=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.sticky?"y":""),f=RegExp(f.source,d+"g"),b,g,h,j;i=i+"";if(!cbSplit._compliantExecNpcg){b=RegExp("^"+f.source+"$(?!\\s)",d)}if(e===undefined||+e<0){e=Infinity}else{e=Math.floor(+e);if(!e){return[]}}while(g=f.exec(i)){h=g.index+g[0].length;if(h>a){c.push(i.slice(a,g.index));if(!cbSplit._compliantExecNpcg&&g.length>1){g[0].replace(b,function(){for(var k=1;k<arguments.length-2;k++){if(arguments[k]===undefined){g[k]=undefined}}})}if(g.length>1&&g.index<i.length){Array.prototype.push.apply(c,g.slice(1))}j=g[0].length;a=h;if(c.length>=e){break}}if(f.lastIndex===g.index){f.lastIndex++}}if(a===i.length){if(j||!f.test("")){c.push("")}}else{c.push(i.slice(a))}return c.length>e?c.slice(0,e):c};cbSplit._compliantExecNpcg=/()??/.exec("")[1]===undefined;cbSplit._nativeSplit=String.prototype.split}String.prototype.split=function(b,a){return cbSplit(this,b,a)};