/**
 * @author Han Lin Yap < http://zencodez.net/ >
 * @copyright 2010 zencodez.net
 * @license http://creativecommons.org/licenses/by-sa/3.0/
 * @package Css3-Finalize
 * @version 1.1 - 2010-10-27
 * @website http://github.com/codler/jQuery-Css3-Finalize
 * 
 * Example Usage
 * // This will look for all style-tags and parse them.
 * $.cssFinalize('style');
 */
(function(a){a.cssFinalize=function(e){function b(g){var h="";a.each(g,function(k,j){h+=j.selector+"{";a.each(j.block,function(i,l){h+=i+":"+l+";"});h+="}"});return h}function c(g){g=g.replace(/\/\*((?:[^\*]|\*[^\/])*)\*\//g,"");g=g.replace(/\n/g,"");return g}function d(i,h){h=c(h);var k=h.split("{");if(k[0]!=""){var j=[{selector:a.trim(k.shift())}]}else{var j=[];k.shift()}a.map(k,function(r,o){var m=r.split("}");tt=m[0].split(":");var l={};var q,p;while(tt.length>0){if(!p){q=a.trim(tt.shift());l[q]=""}else{l[q]+=":";p=false}l[q]+=(function(){var n=tt.shift().split(";");if(a.trim(n[1])){tt.unshift(a.trim(n[1]))}else{p=true}return a.trim(n[0])})()}j[o].block=l;if(m[1]){j[o+1]={selector:a.trim(m[1])}}});var g=[];a.each(j,function(n,l){var m={};a.each(l.block,function(o,p){if(o=="border-radius"){m["-moz-border-radius"]=p;m["-webkit-border-radius"]=p}else{if(o=="box-shadow"){m["-moz-box-shadow"]=p;m["-webkit-box-shadow"]=p}else{if(o=="transform"){m["-moz-transform"]=p;m["-o-transform"]=p;m["-webkit-transform"]=p}else{if(o=="transition"){m["-moz-transition"]=p;m["-o-transition"]=p;m["-webkit-transition"]=p}else{if(o=="box-sizing"){m["-moz-box-sizing"]=p;m["-webkit-box-sizing"]=p}else{if(o=="border-image"){m["-moz-border-image"]=p;m["-webkit-border-image"]=p}else{if(o=="box-orient"){m["-moz-box-orient"]=p;m["-webkit-box-orient"]=p}else{if(o=="box-flex"){m["-moz-box-flex"]=p;m["-webkit-box-flex"]=p}else{if(o=="column-width"){m["-moz-column-width"]=p;m["-webkit-column-width"]=p}else{if(o=="column-gap"){m["-moz-column-gap"]=p;m["-webkit-column-gap"]=p}else{if(o=="column-rule"){m["-moz-column-rule"]=p;m["-webkit-column-rule"]=p}}}}}}}}}}}if(p.indexOf("calc")==0){m[o]="-moz-"+p}});if(!a.isEmptyObject(m)){g.push({selector:l.selector,block:m})}});f(i,g)}if(!(e instanceof jQuery)){e=a(e)}e.each(function(g,h){var i=a(this);if(this.tagName=="LINK"&&a.browser.mozilla){a("<div />").load(this.href,function(j){d(i,j)})}else{d(i,i.html())}});function f(g,h){g.after('<style class="css-finalized">'+b(h)+"</style>").addClass("css-finalize-read")}};a.cssFinalize("style")})(jQuery);