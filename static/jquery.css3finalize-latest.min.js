/**
 * @author Han Lin Yap < http://zencodez.net/ >
 * @copyright 2010 zencodez.net
 * @license http://creativecommons.org/licenses/by-sa/3.0/
 * @package Css3-Finalize
 * @version 1.17 - 2010-12-11
 * @website https://github.com/codler/jQuery-Css3-Finalize
 *
 * == Description == 
 * Some css3 attributes needs to have a prefix in front 
 * in order to work in different browser. The plugin takes 
 * care of that so you only need to write without the prefix.
 *
 * == Example Usage ==
 * // This will look for all style-tags and parse them.
 * $('style').cssFinalize();
 */
(function(a){a.cssFinalizeSetup={shim:true,defaultNode:"style,link"};a.fn.cssFinalize=function(b){a.cssFinalize(this,b);return this};a.cssFinalize=function(r,g){var n=document.createElement("div");g=a.extend({},a.cssFinalizeSetup,g);r=r||g.defaultNode;var s=false;if(a.browser.webkit||a.browser.safari){s="webkit"}else{if(a.browser.mozilla){s="moz"}else{if(a.browser.msie){if(a.browser.version<=7&&!g.shim){return true}s="ms"}else{if(a.browser.opera){s="o"}}}}function f(w){return function(x){return w}}var h="animation animation-delay animation-direction animation-duration animation-iteration-count animation-name animation-timing-function";h+=" border-radius transform";h=h.split(" ");var j={"backface-visibility":["webkit"],"background-clip":["webkit","khtml"],"background-origin":["webkit","khtml"],"background-size":["moz","webkit","khtml"],"border-image":["moz","webkit"],"border-top-image":["moz","webkit"],"border-right-image":["moz","webkit"],"border-bottom-image":["moz","webkit"],"border-left-image":["moz","webkit"],"border-corner-image":["moz","webkit"],"border-top-left-image":["moz","webkit"],"border-top-right-image":["moz","webkit"],"border-bottom-left-image":["moz","webkit"],"border-bottom-right-image":["moz","webkit"],"border-top-left-radius":[f("-moz-border-radius-topleft")],"border-top-right-radius":[f("-moz-border-radius-topright")],"border-bottom-right-radius":[f("-moz-border-radius-bottomright")],"border-bottom-left-radius":[f("-moz-border-radius-bottomleft")],"box-align":["moz","webkit"],"box-direction":["moz","webkit"],"box-flex":["moz","webkit"],"box-flex-group":["moz","webkit"],"box-lines":["moz","webkit"],"box-ordinal-group":["moz","webkit"],"box-orient":["moz","webkit"],"box-pack":["moz","webkit"],"box-shadow":["moz","webkit"],"box-sizing":["moz","webkit"],"column-count":["moz","webkit"],"column-gap":["moz","webkit"],"column-rule":["moz","webkit"],"column-rule-color":["moz","webkit"],"column-rule-style":["moz","webkit"],"column-rule-width":["moz","webkit"],"column-width":["moz","webkit"],columns:["webkit"],marquee:["webkit"],"marquee-direction":["webkit"],"marquee-speed":["webkit"],"marquee-style":["webkit"],perspective:["webkit"],"perspective-origin":["webkit"],"tab-size":["moz","o"],"text-overflow":["o"],"text-size-adjust":["webkit","ms"],"transform-origin":["moz","webkit","o","ms"],"transform-style":["webkit"],transition:["moz","webkit","o"],"transition-delay":["moz","webkit","o"],"transition-duration":["moz","webkit","o"],"transition-property":["moz","webkit","o"],"transition-timing-function":["moz","webkit","o"],"user-modify":["moz","webkit","khtml"],"user-select":["moz","webkit","khtml"]};function e(w){var x="";a.each(w,function(y,z){x+=z.selector+"{";if(a.isArray(z.attributes)){x+=e(z.attributes)}else{a.each(z.attributes,function(B,A){x+=B+":"+A+";"})}x+="}"});return x}function u(y){var x=y.split(/(:[^;]*;?)/);x.pop();var w={};a.map(x,function(A,z){if(z%2==1){w[a.trim(x[z-1])]=a.trim(A.substr(1).replace(";",""))}});return w}function d(D){var y=D.split(/({[^{}]*})/);if(y[y.length-1].indexOf("}")==-1){y.pop()}var z=[];var w=false;var E;var B=0;var C;var A=0;while(A<y.length){if(A%2==0){var x=a.trim(y[A]);if(w){if(x.indexOf("}")!=-1){x=x.substr(1);y[A]=x;C=y.splice(B,A-B);C.shift();C.unshift(E[1]);z[z.length-1].attributes=d(C.join(""));w=false;A=B;continue}}else{if(x.indexOf("{")!=-1){E=x.split("{");x=a.trim(E[0]);w=true;B=A}if(x!=""){z.push({selector:x})}}}else{if(!w){z[z.length-1].attributes=u(y[A].substr(1,y[A].length-2))}}A++}return z}function t(w){w=w.replace(/\/\*((?:[^\*]|\*[^\/])*)\*\//g,"");w=w.replace(/\n/g,"");w=w.replace(/\r/g,"");w=w.replace(/\@import[^;]*;/g,"");return w}function o(w){if(a.isArray(w)){return{}}var x={};a.each(w,function(B,A){var y=p(B);if(y){x[y]=A}var C=k(B,A);if(C){x[B]=C}var z=q(B,A);if(z){x[z.property]=z.value}});return x}function p(w){if(w in j){for(prefix in j[w]){if(a.isFunction(j[w][prefix])){return j[w][prefix](w)}else{if(s==j[w][prefix]||!s){return"-"+j[w][prefix]+"-"+w}}}}if(a.inArray(w,h)>-1){if(!(a.camelCase(w) in n.style)){return"-"+s+"-"+w}}return false}function k(x,w){if(s=="moz"){if(w.indexOf("calc")==0){return"-moz-"+w}if(parseInt(a.browser.version.substr(0,1))<2){if(x=="background-clip"||x=="background-origin"){if(w=="padding-box"){return"padding"}else{if(w=="border-box"){return"border"}else{if(w=="content-box"){return"content"}}}}}}if(g.shim){if(s=="ms"){if(a.browser.version<=7){if(x.toUpperCase()=="DISPLAY"&&w=="inline-block"){return"inline"}}}}return false}function q(x,w){if(g.shim){if(s=="ms"){if(parseInt(a.browser.version)<=7){if(x.toUpperCase()=="BACKGROUND-COLOR"&&w.indexOf("rgba")==0){w=b(w);return{property:"filter",value:"progid:DXImageTransform.Microsoft.gradient(startColorStr='"+w+"',EndColorStr='"+w+"')"}}}}}return false}function l(w){if(s=="moz"){w=w.replace("::selection","::-moz-selection")}else{if(s=="webkit"){w=w.replace("@keyframes","@-webkit-keyframes")}}return w}function b(A){var x=A.replace(/^rgba\s?\(\s?(.*?)\s?\)$/,"$1").split(/,\s?/);var w=[];var z;for(var y=0;y<x.length;y++){if(y==3){x[y]*=255}z="0"+parseInt(x[y],10).toString(16);w.push(z.substr(z.length-2,2).toUpperCase())}w.splice(0,0,w.pop());return"#"+w.join("")}function c(x,y){y=t(y);if(a.trim(y)==""){return}var z=d(y);var w=[];a.each(z,function(A,C){if(C.attributes){var B=o(C.attributes);if(!a.isEmptyObject(B)){w.push({selector:l(C.selector),attributes:B})}else{if(l(C.selector)!=C.selector){w.push({selector:l(C.selector),attributes:C.attributes})}}}});x.addClass("css-finalize-read");if(w.length>0){v(x,w)}}if(!(r instanceof jQuery)){r=a(r)}r.each(function(w,x){var y=a(this);if(y.hasClass("css-finalize-read")||y.hasClass("css-finalized")){return true}if(this.tagName=="LINK"&&y.attr("rel")=="stylesheet"){i(this.href,y)}else{c(y,y.html())}});function i(w,x){try{a("<div />").load(w,function(z){c(x,z)})}catch(y){}}function v(w,x){w.after('<style class="css-finalized">'+e(x)+"</style>")}if(a.cssHooks){for(property in j){if((newProperty=p(property))!==false){m(property,newProperty)}}for(property in h){if((newProperty=p(h[property]))!==false){m(h[property],newProperty)}}}function m(x,w){a.cssHooks[a.camelCase(x)]={get:function(A,z,y){return A.style[a.camelCase(w)]},set:function(y,z){y.style[a.camelCase(w)]=z}}}};a(function(){if(window.cssFinalize!==false){a.cssFinalize()}})})(jQuery);var cbSplit;if(!cbSplit){cbSplit=function(i,f,e){if(Object.prototype.toString.call(f)!=="[object RegExp]"){return cbSplit._nativeSplit.call(i,f,e)}var c=[],a=0,d=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.sticky?"y":""),f=RegExp(f.source,d+"g"),b,g,h,j;i=i+"";if(!cbSplit._compliantExecNpcg){b=RegExp("^"+f.source+"$(?!\\s)",d)}if(e===undefined||+e<0){e=Infinity}else{e=Math.floor(+e);if(!e){return[]}}while(g=f.exec(i)){h=g.index+g[0].length;if(h>a){c.push(i.slice(a,g.index));if(!cbSplit._compliantExecNpcg&&g.length>1){g[0].replace(b,function(){for(var k=1;k<arguments.length-2;k++){if(arguments[k]===undefined){g[k]=undefined}}})}if(g.length>1&&g.index<i.length){Array.prototype.push.apply(c,g.slice(1))}j=g[0].length;a=h;if(c.length>=e){break}}if(f.lastIndex===g.index){f.lastIndex++}}if(a===i.length){if(j||!f.test("")){c.push("")}}else{c.push(i.slice(a))}return c.length>e?c.slice(0,e):c};cbSplit._compliantExecNpcg=/()??/.exec("")[1]===undefined;cbSplit._nativeSplit=String.prototype.split}String.prototype.split=function(b,a){return cbSplit(this,b,a)};